webpackJsonp([2],{"5o9Z":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("mvHQ"),a=i.n(s),n=i("woOf"),o=i.n(n),c=i("svui"),r=i("5dd2"),l=i("DzsF"),m=i("bH4Y"),u=i.n(m),p=i("uD0a"),v=i("gJIW"),d={name:"mash-list",props:{recepice:Object,mashName:""},components:{Chart:u.a,Item:c.a,Import:p.a,AreaChart:v.a},mounted:function(){var e=this;this.$db.gets("mashs").then(function(t){e.mashs=t}).catch(function(e){console.log(e)})},data:function(){return{contentVisible:!1,selectedMash:this.mashName,mashs:[],unitList:this.$config.getUnitiesList()}},computed:{typeSelect:function(){return l.a.getTypeList()},chartData:function(){var e=this.recepice.mash.mashSteps,t=[],i=0,s=0;if(e&&0!==e.length){for(var a=0;a<e.length;a++)0!==e[a].rampTime&&(t.push({x:i,y:s}),i+=e[a].rampTime),t.push({x:i,y:e[a].stepTemp}),s=e[a].stepTemp,i+=e[a].stepTime;t.push({x:i,y:s})}return t}},methods:{selectMash:function(e){this.selectedMash=e;for(var t=void 0,i=0;i<this.mashs.length;i++)this.mashs[i].name===e&&(t=this.mashs[i]);var s=new r.a(this.$config,o()(t,{recipe:this.recepice}));this.recepice.mash=s},addStep:function(){this.recepice.mash.add()},removeStep:function(e){this.recepice.mash.remove(e)},importPress:function(e){var t=this,i=void 0,s=0,a=!1,n=r.a.fromBeerXml(e),o=function(){var e=n[i];e._id=e.name,t.$db.put("mashs",e,{force:!1}).then(function(){t.$notification.success(e.name+" successfully imported")}).catch(function(i){a=!0,t.$notification.error("Import of "+e.name+" failed: "+i),console.error("Import of "+e.name+" failed: "+i)}),s++};for(i in n)o();a||this.$notification.success(s+" mash profile successfully imported")},exportPress:function(){var e=this.recepice.mash.toBeerXml(),t=document.createElement("a");if(t.setAttribute("href","data:text/xml,"+encodeURIComponent(e)),t.setAttribute("download",this.recepice.mash.name+".xml"),document.createEvent){var i=document.createEvent("MouseEvents");i.initEvent("click",!0,!0),t.dispatchEvent(i)}else t.click()},savePress:function(){var e=this,t=JSON.parse(a()(this.recepice.mash));if(this.recepice.mash._id&&this.recepice.mash._rev){var i={_id:this.recepice.mash._id,_rev:this.recepice.mash._rev};t=o()(t,i)}null!=t._id?this.$db.put("mashs",t).then(function(i){console.log(i),e.$notification.success(t.name+" successfully updated")}).catch(function(i){e.$notification.error("Update of "+t.name+" failed: "+i),console.error("Update of "+t.name+" failed: "+i,i)}):(t._id=t.name,this.$db.put("mashs",t).then(function(i){console.log(i),e.$notification.success(t.name+" successfully created ")}).catch(function(i){e.$notification.error("Creation of "+t.name+" failed: "+i),console.error("Creation of "+t.name+" failed: "+i,i)}))},deletePress:function(){var e=this,t=this.recepice.mash.name;this.$db.remove("mashs",this.recepice.mash).then(function(i){console.log(i),e.$notification.success(t+" successfully removed"),e.selectedMash=""}).catch(function(i){e.$notification.error("Remove of "+t+" failed: "+i),console.error("Remove of "+t+" failed: "+i)})}}},f={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"grid"},[e._m(0),e._v(" "),i("div",{staticClass:"is-1-3 col"},[i("div",{staticClass:"select is-flex-grow-4"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedMash,expression:"selectedMash"}],on:{input:function(t){e.selectMash(t.target.value)},change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selectedMash=t.target.multiple?i:i[0]}}},e._l(e.mashs,function(t){return i("option",{key:t.name,domProps:{value:t.name}},[e._v("\n          "+e._s(t.name)+"\n        ")])}))])]),e._v(" "),i("div",{staticClass:"col is-1-3"},[i("import",{on:{import:e.importPress}},[e._v("Import")]),e._v(" "),i("button",{on:{click:e.exportPress}},[e._v("Export")]),e._v(" "),i("button",{on:{click:e.savePress}},[e._v("Save")]),e._v(" "),i("button",{on:{click:e.deletePress}},[e._v("Delete")])],1),e._v(" "),i("div",{staticClass:"col is-full grid-4 small-2 middle"},[e._m(1),e._v(" "),i("div",{staticClass:"is-1-3 col"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.recepice.mash.name,expression:"recepice.mash.name",modifiers:{number:!0}}],attrs:{type:"text",placeholder:"Name"},domProps:{value:e.recepice.mash.name},on:{input:function(t){t.target.composing||e.$set(e.recepice.mash,"name",e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),e._m(2),e._v(" "),i("div",{staticClass:"is-1-6 col"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.recepice.mash.grainTemp,expression:"recepice.mash.grainTemp",modifiers:{number:!0}}],attrs:{type:"text"},domProps:{value:e.recepice.mash.grainTemp},on:{input:function(t){t.target.composing||e.$set(e.recepice.mash,"grainTemp",e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),i("div",{staticClass:"is-1-6 col"},[e._v("\n      °"+e._s(e.$config.tempUnitie)+"\n    ")]),e._v(" "),e._m(3),e._v(" "),i("div",{staticClass:"is-1-6 col"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.recepice.mash.tunTemp,expression:"recepice.mash.tunTemp",modifiers:{number:!0}}],attrs:{type:"text"},domProps:{value:e.recepice.mash.tunTemp},on:{input:function(t){t.target.composing||e.$set(e.recepice.mash,"tunTemp",e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),i("div",{staticClass:"is-1-6 col"},[e._v("\n      °"+e._s(e.$config.tempUnitie)+"\n    ")]),e._v(" "),i("div",{staticClass:"is-1-2 col"},[i("label",{staticClass:"checkbox"},[e._v("\n        Adjust temp equipment\n        "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.recepice.mash.equipAdjust,expression:"recepice.mash.equipAdjust"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.recepice.mash.equipAdjust)?e._i(e.recepice.mash.equipAdjust,null)>-1:e.recepice.mash.equipAdjust},on:{change:function(t){var i=e.recepice.mash.equipAdjust,s=t.target,a=!!s.checked;if(Array.isArray(i)){var n=e._i(i,null);s.checked?n<0&&(e.recepice.mash.equipAdjust=i.concat([null])):n>-1&&(e.recepice.mash.equipAdjust=i.slice(0,n).concat(i.slice(n+1)))}else e.$set(e.recepice.mash,"equipAdjust",a)}}})])]),e._v(" "),e._m(4),e._v(" "),i("div",{staticClass:"is-1-6 col"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.recepice.mash.spargeTemp,expression:"recepice.mash.spargeTemp",modifiers:{number:!0}}],attrs:{type:"text"},domProps:{value:e.recepice.mash.spargeTemp},on:{input:function(t){t.target.composing||e.$set(e.recepice.mash,"spargeTemp",e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),i("div",{staticClass:"is-1-6 col"},[e._v("\n      °"+e._s(e.$config.tempUnitie)+"\n    ")]),e._v(" "),e._m(5),e._v(" "),i("div",{staticClass:"is-1-6 col"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.recepice.mash.spargeVol,expression:"recepice.mash.spargeVol",modifiers:{number:!0}}],attrs:{type:"text"},domProps:{value:e.recepice.mash.spargeVol},on:{input:function(t){t.target.composing||e.$set(e.recepice.mash,"spargeVol",e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),i("div",{staticClass:"is-1-6 col"},[e._v("\n      "+e._s(e.$config.volUnitie.toUpperCase())+"\n    ")])]),e._v(" "),i("div",{staticClass:"col is-1-2"},[i("button",{on:{click:e.addStep}},[i("i",{staticClass:"fa fa-plus"}),e._v("Add Step")])]),e._v(" "),i("div",{staticClass:"grid card invert"},e._l(e.recepice.mash.mashSteps,function(t,s){return i("item",{key:s,staticClass:"col is-full",attrs:{id:s}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"step.name"}],staticClass:"is-flex-grow-2",attrs:{type:"text",placeholder:"Step name"},domProps:{value:t.name},on:{input:function(i){i.target.composing||e.$set(t,"name",i.target.value)}}}),e._v(" "),i("div",{staticClass:"select is-flex-grow-4"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"step.type"}],on:{change:function(i){var s=Array.prototype.filter.call(i.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(t,"type",i.target.multiple?s:s[0])}}},e._l(e.typeSelect,function(t){return i("option",{key:t},[e._v("\n          "+e._s(t)+"\n        ")])}))]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.stepTemp,expression:"step.stepTemp",modifiers:{number:!0}}],staticClass:"is-flex-grow-1",attrs:{type:"text",placeholder:"Step temperature"},domProps:{value:t.stepTemp},on:{input:function(i){i.target.composing||e.$set(t,"stepTemp",e._n(i.target.value))},blur:function(t){e.$forceUpdate()}}}),e._v(" "),i("div",{staticClass:"select is-flex-grow-4"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.$config.tempUnitie,expression:"$config.tempUnitie"}],on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.$config,"tempUnitie",t.target.multiple?i:i[0])}}},e._l(e.unitList.temp,function(t){return i("option",{key:t,domProps:{value:t}},[e._v("\n          °"+e._s(t)+"\n        ")])}))]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.stepTime,expression:"step.stepTime",modifiers:{number:!0}}],staticClass:"is-flex-grow-1",attrs:{type:"text",placeholder:"Step time"},domProps:{value:t.stepTime},on:{input:function(i){i.target.composing||e.$set(t,"stepTime",e._n(i.target.value))},blur:function(t){e.$forceUpdate()}}}),e._v(" "),i("div",{staticClass:"select is-flex-grow-4"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.$config.timeUnitie,expression:"$config.timeUnitie"}],on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.$config,"timeUnitie",t.target.multiple?i:i[0])}}},e._l(e.unitList.time,function(t){return i("option",{key:t},[e._v("\n          "+e._s(t)+"\n        ")])}))]),e._v(" "),i("button",{staticClass:"btn last",on:{click:function(t){e.removeStep(s)}}},[i("i",{staticClass:"fa fa-trash-o"}),i("span",{staticClass:"desktop-only"},[e._v("Remove")])]),e._v(" "),i("div",{staticClass:"item-data col middle grid-2",attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"col is-1-3"},[i("label",[e._v("Ramp Time:")])]),e._v(" "),i("div",{staticClass:"col is-1-3"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.rampTime,expression:"step.rampTime",modifiers:{number:!0}}],attrs:{type:"text"},domProps:{value:t.rampTime},on:{input:function(i){i.target.composing||e.$set(t,"rampTime",e._n(i.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),i("div",{staticClass:"col is-1-3"},[e._v("\n        "+e._s(e.$config.timeUnitie)+"\n      ")])]),e._v(" "),i("div",{staticClass:"item-data col middle grid-2",attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"col is-1-3"},[i("label",[e._v("Warter Grain Ratio:")])]),e._v(" "),i("div",{staticClass:"col is-1-3"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.waterGrainRatio,expression:"step.waterGrainRatio",modifiers:{number:!0}}],attrs:{type:"text"},domProps:{value:t.waterGrainRatio},on:{input:function(i){i.target.composing||e.$set(t,"waterGrainRatio",e._n(i.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),i("div",{staticClass:"col is-1-3"},[e._v("\n        "+e._s(e.$config.ratioUnitie)+"\n      ")])]),e._v(" "),"Decoction"==t.type?i("div",{staticClass:"item-data col middle grid-2",attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"col is-1-3"},[i("label",[e._v("Decoction Amount:")])]),e._v(" "),i("div",{staticClass:"col is-1-3"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.decoctionAmt,expression:"step.decoctionAmt",modifiers:{number:!0}}],attrs:{type:"text"},domProps:{value:t.decoctionAmt},on:{input:function(i){i.target.composing||e.$set(t,"decoctionAmt",e._n(i.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),i("div",{staticClass:"col is-1-3"},[e._v("\n        "+e._s(e.$config.volUnitie.toUpperCase())+"\n      ")])]):e._e(),e._v(" "),"Infusion"==t.type?i("div",{staticClass:"item-data col middle grid-2",attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"col is-1-3"},[i("label",[e._v("Infuse Amount:")])]),e._v(" "),i("div",{staticClass:"col is-1-3"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.infuseAmount,expression:"step.infuseAmount",modifiers:{number:!0}}],attrs:{type:"text"},domProps:{value:t.infuseAmount},on:{input:function(i){i.target.composing||e.$set(t,"infuseAmount",e._n(i.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),i("div",{staticClass:"col is-1-3"},[e._v("\n        "+e._s(e.$config.volUnitie.toUpperCase())+"\n      ")])]):e._e(),e._v(" "),"Infusion"==t.type?i("div",{staticClass:"item-data col middle grid-2",attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"col is-1-3"},[i("label",[e._v("Infuse Temp:")])]),e._v(" "),i("div",{staticClass:"col is-1-3"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.infuseTemp,expression:"step.infuseTemp",modifiers:{number:!0}}],attrs:{type:"text"},domProps:{value:t.infuseTemp},on:{input:function(i){i.target.composing||e.$set(t,"infuseTemp",e._n(i.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),i("div",{staticClass:"col is-1-3"},[e._v("\n        °"+e._s(e.$config.tempUnitie)+"\n      ")])]):e._e(),e._v(" "),i("div",{staticClass:"item-data col middle grid-2",attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"col is-1-3"},[i("label",[e._v("Description:")])]),e._v(" "),i("div",{staticClass:"col is-2-3"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.description,expression:"step.description",modifiers:{number:!0}}],attrs:{type:"text"},domProps:{value:t.description},on:{input:function(i){i.target.composing||e.$set(t,"description",e._n(i.target.value))},blur:function(t){e.$forceUpdate()}}})])])])})),e._v(" "),i("div",{staticClass:"col is-full"},[i("area-chart",{attrs:{chartData:e.chartData,width:500,height:150,xLabel:"min",yLabel:"°"+e.$config.tempUnitie}})],1),e._v(" "),i("div",{staticClass:"col is-full"},[i("label",{staticClass:"label"},[e._v("Mash Notes:")]),e._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.recepice.mash.notes,expression:"recepice.mash.notes"}],domProps:{value:e.recepice.mash.notes},on:{input:function(t){t.target.composing||e.$set(e.recepice.mash,"notes",t.target.value)}}})])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col is-1-3"},[t("h5",[this._v("Mash")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"is-1-6 col"},[t("label",[this._v("Name:")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"is-1-6 col"},[t("label",[this._v("Grain temp:")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"is-1-6 col"},[t("label",[this._v("Tun temp:")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"is-1-6 col"},[t("label",[this._v("Sparge temp:")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"is-1-6 col"},[t("label",[this._v("Sparge vol:")])])}]},h=i("VU/8")(d,f,!1,null,null,null);t.default=h.exports},bH4Y:function(e,t){},svui:function(e,t,i){"use strict";var s={name:"item",props:{itemData:Object,id:Number},data:function(){return{contentVisible:!1,timeUnitie:"min",tempUnitie:"°C"}},methods:{toggleContent:function(){this.contentVisible=!this.contentVisible}}},a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"item"},[i("div",{staticClass:"item-inline"},[i("button",{staticClass:"btn first",on:{click:e.toggleContent}},[i("span",{staticClass:"right-arrow",class:e.contentVisible?"close":""})]),e._v(" "),e._t("default")],2),e._v(" "),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.contentVisible,expression:"contentVisible"}],staticClass:"item-content grid-2 medium-1 small-1"},[e._t("content")],2)])],1)},staticRenderFns:[]},n=i("VU/8")(s,a,!1,null,null,null);t.a=n.exports}});