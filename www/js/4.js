webpackJsonp([4],{VCLo:function(t,e,s){"use strict";var i=s("mvHQ"),a=s.n(i),n=s("woOf"),o=s.n(n),r=s("Zrlr"),h=s.n(r),l=s("wxAW"),c=s.n(l),u=s("xnLf"),f=s("r5j1"),d=s("Zh+r"),m=s("fz5m"),p=s("bZ3E"),v=s("5dd2"),g=s("7tHv"),b=s("3Jxy"),y=s("eo9B"),w=s("trpZ"),k=s("Anna"),O=s("Wtf7"),S=["Extract","Partial Mash","All Grain"],z=function(){function t(e,s){var i=this;if(h()(this,t),this.toBeerXml=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(O.a)(i.toJSON(),"recipe",t)},this.name="",this.notes="",this.brewer="",this.asstBrewer=null,this.type="",this.equipment=new y.a,this.style=new w.a,this.batchSize=20,this.boilSize=23,this.calcBoilSize=!0,this.boilTime=60,this.efficiency=75,this.fermentables=[],this.yeasts=[],this.hops=[],this.miscs=[],this.waters=[],this.mash=new v.a(e,{recipe:this}),this.fermentation=new g.a,this.carbonation=new b.a,this.og=0,this.fg=0,this.tasteNote="",this.tasteRating="",this.date="",this.estOg=null,this.estFg=null,this.estColor=null,this.ibu=null,this.ibuMethod="tinseth",this.estAbv=null,this.abv=null,this.actualEfficiency=null,this.calories=null,this.displayBatchSize=null,this.displayBoilSize=null,this.displayOg=null,this.displayFg=null,this._config=e,s){if(o()(this,s),s.fermentables&&0!==s.fermentables.length){this.fermentables=[];for(var a=0;a<s.fermentables.length;a++)this.add("fermentable",s.fermentables[a])}if(s.hops&&0!==s.hops.length){this.hops=[];for(var n=0;n<s.hops.length;n++)this.add("hop",s.hops[n])}if(s.yeasts&&0!==s.yeasts.length){this.yeasts=[];for(var r=0;r<s.yeasts.length;r++)this.add("yeast",s.yeasts[r])}if(s.miscs&&0!==s.miscs.length){this.miscs=[];for(var l=0;l<s.miscs.length;l++)this.add("misc",s.miscs[l])}if(s.waters&&0!==s.waters.length){this.waters=[];for(var c=0;c<s.waters.length;c++)this.add("water",s.waters[c])}s.equipment&&(this.equipment=new y.a(s.equipment))}}return c()(t,[{key:"getTypeList",value:function(){return S}},{key:"getBatchSize",value:function(t){return this.displayBatchSize?k.a.convertTo(this.displayBatchSize,t):this.batchSize}},{key:"setBatchSize",value:function(t,e){this.batchSize=t,this.displayBatchSize=t+" "+e}},{key:"getBoilSize",value:function(t){return this.equipment.calcBoilVolume?this.calculBoilSize():this.displayBoilSize?k.a.convertTo(this.displayBoilSize,t):this.boilSize}},{key:"setBoilSize",value:function(t,e){this.equipment.calcBoilVolume||(this.boilSize=t,this.displayBoilSize=t+" "+e)}},{key:"getOg",value:function(t){return this.displayOg?k.a.convertTo(this.displayOg,t):this.og}},{key:"setOg",value:function(t,e){this.og=t,this.displayOg=t+" "+e}},{key:"getFg",value:function(t){return this.displayFg?k.a.convertTo(this.displayFg,t):this.fg}},{key:"setFg",value:function(t,e){this.fg=t,this.displayFg=t+" "+e}},{key:"getEstOg",value:function(t){return this.estOg||this.updateOg(),k.a.convertTo(this.estOg,t,3)}},{key:"setEstOg",value:function(t,e){this.estOg=t+" "+e}},{key:"getEstFg",value:function(t){return this.estFg||this.updateFg(),k.a.convertTo(this.estFg,t,3)}},{key:"setEstFg",value:function(t,e){this.estFg=t+" "+e}},{key:"getEstAbv",value:function(){if(this.estAbv)return k.a.isType("string",this.estAbv)?k.a.roundDecimal(this.estAbv.split(" ")[0],1):this.estAbv;var t=this.calculAbv();return this.setEstAbv(t),t}},{key:"setEstAbv",value:function(t){this.estAbv=t+" %"}},{key:"getFementablesTotal",value:function(){for(var t=0,e=0;e<this.fermentables.length;e++)t+=this.fermentables[e].amount;return t}},{key:"calculAbv",value:function(){return k.a.roundDecimal(76.08*(this.estOg-this.estFg)/(1.775-this.estOg)*(this.estFg/.794),1)}},{key:"calculBoilSize",value:function(){return k.a.roundDecimal(this.batchSize/(1-this.equipment.evapRate/100)*this.boilTime/60+this.equipment.trubChillerLoss,1)}},{key:"updateOg",value:function(){if(this.fermentables){var t=void 0,e=0,s=0;for(t=0;t<this.fermentables.length;t++)e+=this.fermentables[t].getSugar(this.efficiency),s+=this.fermentables[t].getColor(this.batchSize);this.estOg=k.a.roundDecimal((this.batchSize-e/1.59+e)/this.batchSize,3),this.estColor=k.a.roundDecimal(s,1)}}},{key:"updateFg",value:function(){var t=void 0,e=0;for(t=0;t<this.yeasts.length;t++)this.yeasts[t].getAttenuation()>e&&(e=this.yeasts[t].getAttenuation());this.estFg=k.a.roundDecimal((this.estOg-1)*(1-e/100)+1,3),this.setCalories()}},{key:"updateIbu",value:function(){var t=void 0,e=0;for(t=0;t<this.hops.length;t++)e+=this.hops[t].bitterness(this.ibuMethod.toLowerCase(),this.estOg,this.batchSize);this.ibu=k.a.roundDecimal(e,1)}},{key:"setCalories",value:function(){var t,e,s=void 0;(s=(6.9*(((t=k.a.sgToPlato(this.estOg))-(e=.1808*t+.8192*k.a.sgToPlato(this.estFg)))/(2.0665-.010665*t))+4*(e-.1))*this.estFg*3.55)<0&&(s=0),this.calories=s*(1/k.a.onceToLiter(12))}},{key:"add",value:function(t,e){var s=void 0,i=void 0;switch(t){case"fermentable":s=this.fermentables.push(new u.a(e)),i=this.updateOg.bind(this);break;case"hop":s=this.hops.push(new f.a(e)),i=this.updateIbu.bind(this);break;case"yeast":s=this.yeasts.push(new d.a(e)),i=this.updateFg.bind(this);break;case"misc":s=this.miscs.push(new m.a(e));break;case"water":s=this.waters.push(new p.a(e))}return i&&i(),s}},{key:"remove",value:function(t,e){var s=void 0,i=void 0;switch(t){case"fermentable":s=this.fermentables,i=this.updateOg.bind(this);break;case"hop":s=this.hops,i=this.updateIbu.bind(this);break;case"yeast":s=this.yeasts,i=this.updateFg.bind(this);break;case"misc":s=this.miscs;break;case"water":s=this.waters}for(var n=0;n<s.length;n++)a()(s[n])===a()(e)&&s.splice(n,1);i&&i()}},{key:"toJSON",value:function(){return{name:this.name,notes:this.notes,brewer:this.brewer,type:this.type,equipment:this.equipment,style:this.style,batchSize:this.batchSize,boilSize:this.boilSize,boilTime:this.boilTime,efficiency:this.efficiency,fermentables:this.fermentables,yeasts:this.yeasts,hops:this.hops,misc:this.misc,waters:this.waters,mash:this.mash,fermentation:this.fermentation,carbonation:this.carbonation,og:this.og,fg:this.fg,tasteNote:this.tasteNote,tasteRating:this.tasteRating,date:this.date,estOg:this.estOg,estAbv:this.estAbv,estFg:this.estFg,estColor:this.estColor,ibu:this.ibu}}}],[{key:"fromBeerXml",value:function(t){return Object(O.b)(t,"recipe")}}]),t}();e.a=z},h687:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("fZjL"),a=s.n(i),n=s("uD0a"),o=s("VCLo"),r={name:"recettesList",components:{Import:n.a},mounted:function(){this.fetchData()},data:function(){var t={},e={showModal:!1,columns:["id","nom","origine","type","couleur","potentiel","max","stock","prix"],sortKey:"",filterKey:"",sortOrders:t,modalTitle:"",modalData:null,db:"recipes",data:[]};return e.columns.forEach(function(e){t[e]=1}),e},computed:{filteredData:function(){var t=this.sortKey,e=this.filterKey&&this.filterKey.toLowerCase(),s=this.sortOrders[t]||1;if(void 0!==this.data){var i=this.data;return e&&(i=i.filter(function(t){return a()(t).some(function(s){return String(t[s]).toLowerCase().indexOf(e)>-1})})),t&&(i=i.slice().sort(function(e,i){return((e=e[t])===(i=i[t])?0:e>i?1:-1)*s})),i}return null}},methods:{fetchData:function(){var t=this;this.$db.gets(this.db).then(function(e){t.data=e}).catch(function(t){console.log(t)})},sortBy:function(t){this.sortKey=t,this.sortOrders[t]=-1*this.sortOrders[t]},importPress:function(t){var e=this,s=o.a.fromBeerXml(t);console.log(s);var i=void 0,a=0,n=!1,r=function(){var t=s[i];a++,t._id=t.name,e.$db.put(e.db,t,{force:!1}).then(function(){e.$notification.success(t.name+" successfully imported")}).catch(function(s){n=!0,e.$notification.error("Import of "+t.name+" failed: "+s),console.error("Import of "+name+" failed: "+s)})};for(i in s)r();n||this.$notification.success(a+" "+this.db+" successfully imported")},add:function(){this.$router.push({name:"edit",params:{name:"new"}})},edit:function(t){this.modalTitle="Editer Recettes",this.$emit("update",t),this.showModal=!0},supress:function(t){var e=this;this.$http.delete("/api/recettes/"+t.id).then(function(t){e.$store.dispatch("getAllRecettes")},function(t){console.log("error from delete request /api/recettes")})},closeModal:function(){this.showModal=!1}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"section"},[s("div",{staticClass:"field is-horizontal"},[s("div",{staticClass:"field-body"},[s("p",{staticClass:"control field has-icons-right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.filterKey,expression:"filterKey"}],staticClass:"input",attrs:{type:"text",placeholder:"Search",name:"query"},domProps:{value:t.filterKey},on:{input:function(e){e.target.composing||(t.filterKey=e.target.value)}}}),t._v(" "),s("span",{staticClass:"icon is-small is-right"},[s("icon",{attrs:{icon:["fas","search"]}})],1)])]),t._v(" "),s("div",{staticClass:"field-body"},[s("div",{staticClass:"field is-grouped"},[s("import",{on:{import:t.importPress}},[t._v("Import")]),t._v(" "),s("button",{staticClass:"button",attrs:{type:"button"},on:{click:t.add}},[s("span",{staticClass:"icon is-small"},[s("icon",{attrs:{icon:["fas","plus"]}})],1),t._v(" "),s("span",[t._v("Create")])])],1)])]),t._v(" "),s("ul",{attrs:{id:"example-1"}},t._l(t.filteredData,function(e,i){return s("li",{key:i},[s("router-link",{attrs:{to:{name:"edit",params:{name:e.name}}}},[t._v(t._s(e.name))])],1)})),t._v(" "),s("router-view")],1)},staticRenderFns:[]};var l=s("VU/8")(r,h,!1,function(t){s("rbpX")},null,null);e.default=l.exports},rbpX:function(t,e){}});