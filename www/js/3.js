webpackJsonp([3],{"5o9Z":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("mvHQ"),n=s.n(i),a=s("woOf"),c=s.n(a),o=s("svui"),l=s("5dd2"),r=s("DzsF"),m=s("bH4Y"),u=s.n(m),p=s("uD0a"),v=s("gJIW"),d=s("mcVK"),f=s("686y"),h={name:"mash-list",props:{recepice:Object,mashName:""},components:{Chart:u.a,Item:o.a,Import:p.a,AreaChart:v.a,VTextarea:d.a,VInput:f.a},mounted:function(){var e=this;this.$db.gets("mashs").then(function(t){e.mashs=t}).catch(function(e){console.log(e)})},data:function(){return{contentVisible:!1,selectedMash:this.mashName,mashs:[],unitList:this.$config.getUnitiesList()}},computed:{typeSelect:function(){return r.a.getTypeList()},chartData:function(){var e=this.recepice.mash.mashSteps,t=[],s=0,i=0;if(e&&0!==e.length){for(var n=0;n<e.length;n++)0!==e[n].rampTime&&(t.push({x:s,y:i}),s+=e[n].rampTime),t.push({x:s,y:e[n].stepTemp}),i=e[n].stepTemp,s+=e[n].stepTime;t.push({x:s,y:i})}return t}},methods:{selectMash:function(e){this.selectedMash=e;for(var t=void 0,s=0;s<this.mashs.length;s++)this.mashs[s].name===e&&(t=this.mashs[s]);var i=new l.a(this.$config,c()(t,{recipe:this.recepice}));this.recepice.mash=i},addStep:function(){this.recepice.mash.add()},removeStep:function(e){this.recepice.mash.remove(e)},importPress:function(e){var t=this,s=void 0,i=0,n=!1,a=l.a.fromBeerXml(e),c=function(){var e=a[s];e._id=e.name,t.$db.put("mashs",e,{force:!1}).then(function(){t.$notification.success(e.name+" successfully imported")}).catch(function(s){n=!0,t.$notification.error("Import of "+e.name+" failed: "+s),console.error("Import of "+e.name+" failed: "+s)}),i++};for(s in a)c();n||this.$notification.success(i+" mash profile successfully imported")},exportPress:function(){var e=this.recepice.mash.toBeerXml(),t=document.createElement("a");if(t.setAttribute("href","data:text/xml,"+encodeURIComponent(e)),t.setAttribute("download",this.recepice.mash.name+".xml"),document.createEvent){var s=document.createEvent("MouseEvents");s.initEvent("click",!0,!0),t.dispatchEvent(s)}else t.click()},savePress:function(){var e=this,t=JSON.parse(n()(this.recepice.mash));if(this.recepice.mash._id&&this.recepice.mash._rev){var s={_id:this.recepice.mash._id,_rev:this.recepice.mash._rev};t=c()(t,s)}null!=t._id?this.$db.put("mashs",t).then(function(s){console.log(s),e.$notification.success(t.name+" successfully updated")}).catch(function(s){e.$notification.error("Update of "+t.name+" failed: "+s),console.error("Update of "+t.name+" failed: "+s,s)}):(t._id=t.name,this.$db.put("mashs",t).then(function(s){console.log(s),e.$notification.success(t.name+" successfully created ")}).catch(function(s){e.$notification.error("Creation of "+t.name+" failed: "+s),console.error("Creation of "+t.name+" failed: "+s,s)}))},deletePress:function(){var e=this,t=this.recepice.mash.name;this.$db.remove("mashs",this.recepice.mash).then(function(s){console.log(s),e.$notification.success(t+" successfully removed"),e.selectedMash=""}).catch(function(s){e.$notification.error("Remove of "+t+" failed: "+s),console.error("Remove of "+t+" failed: "+s)})}}},_={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:'columns is-multiline is-mobile"'},[e._m(0),e._v(" "),s("div",{staticClass:"column is-3"},[s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedMash,expression:"selectedMash"}],on:{input:function(t){e.selectMash(t.target.value)},change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selectedMash=t.target.multiple?s:s[0]}}},e._l(e.mashs,function(t){return s("option",{key:t.name,domProps:{value:t.name}},[e._v("\n          "+e._s(t.name)+"\n        ")])}))])]),e._v(" "),s("div",{staticClass:"column is-6"},[s("div",{staticClass:"columns is-1"},[s("div",{staticClass:"column is-narrow"},[s("import",{on:{import:e.importPress}},[e._v("Import")])],1),e._v(" "),s("div",{staticClass:"column is-narrow"},[s("button",{staticClass:"button",on:{click:e.exportPress}},[e._v("Export")])]),e._v(" "),s("div",{staticClass:"column is-narrow"},[s("button",{staticClass:"button",on:{click:e.savePress}},[e._v("Save")])]),e._v(" "),s("div",{staticClass:"column is-narrow"},[s("button",{staticClass:"button",on:{click:e.deletePress}},[e._v("Delete")])])])]),e._v(" "),s("div",{staticClass:"column is-full"},[s("div",{staticClass:"columns is-multiline is-mobile"},[s("div",{staticClass:"column is-6"},[s("v-input",{attrs:{label:"Name"},model:{value:e.recepice.mash.name,callback:function(t){e.$set(e.recepice.mash,"name",t)},expression:"recepice.mash.name"}})],1),e._v(" "),s("div",{staticClass:"column is-4"},[s("v-input",{attrs:{label:"Grain temp"},model:{value:e.recepice.mash.grainTemp,callback:function(t){e.$set(e.recepice.mash,"grainTemp",e._n(t))},expression:"recepice.mash.grainTemp"}})],1),e._v(" "),s("div",{staticClass:"column is-2"},[e._v("\n        °"+e._s(e.$config.tempUnitie)+"\n      ")]),e._v(" "),s("div",{staticClass:"column is-4"},[s("v-input",{attrs:{label:"Tun temp"},model:{value:e.recepice.mash.tunTemp,callback:function(t){e.$set(e.recepice.mash,"tunTemp",e._n(t))},expression:"recepice.mash.tunTemp"}})],1),e._v(" "),s("div",{staticClass:"column is-2"},[e._v("\n        °"+e._s(e.$config.tempUnitie)+"\n      ")]),e._v(" "),s("div",{staticClass:"column is-6"},[s("label",{staticClass:"checkbox"},[e._v("\n          Adjust temp equipment\n          "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.recepice.mash.equipAdjust,expression:"recepice.mash.equipAdjust"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.recepice.mash.equipAdjust)?e._i(e.recepice.mash.equipAdjust,null)>-1:e.recepice.mash.equipAdjust},on:{change:function(t){var s=e.recepice.mash.equipAdjust,i=t.target,n=!!i.checked;if(Array.isArray(s)){var a=e._i(s,null);i.checked?a<0&&(e.recepice.mash.equipAdjust=s.concat([null])):a>-1&&(e.recepice.mash.equipAdjust=s.slice(0,a).concat(s.slice(a+1)))}else e.$set(e.recepice.mash,"equipAdjust",n)}}})])]),e._v(" "),s("div",{staticClass:"column is-4"},[s("v-input",{attrs:{label:"Sparge temp"},model:{value:e.recepice.mash.spargeTemp,callback:function(t){e.$set(e.recepice.mash,"spargeTemp",e._n(t))},expression:"recepice.mash.spargeTemp"}})],1),e._v(" "),s("div",{staticClass:"column is-2"},[e._v("\n        °"+e._s(e.$config.tempUnitie)+"\n      ")]),e._v(" "),s("div",{staticClass:"column is-4"},[s("v-input",{attrs:{label:"Sparge vol"},model:{value:e.recepice.mash.spargeVol,callback:function(t){e.$set(e.recepice.mash,"spargeVol",e._n(t))},expression:"recepice.mash.spargeVol"}})],1),e._v(" "),s("div",{staticClass:"column is-2"},[e._v("\n        "+e._s(e.$config.volUnitie.toUpperCase())+"\n      ")])])]),e._v(" "),s("div",{staticClass:"column is-full"},[s("button",{staticClass:"button",on:{click:e.addStep}},[s("i",{staticClass:"fa fa-plus"}),e._v("Add Step")])]),e._v(" "),s("div",{staticClass:"columns is-multiline is-mobile card"},e._l(e.recepice.mash.mashSteps,function(t,i){return s("item",{key:i,staticClass:"column is-full",attrs:{id:i}},[s("div",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"step.name"}],staticClass:"input",attrs:{type:"text",placeholder:"Step name"},domProps:{value:t.name},on:{input:function(s){s.target.composing||e.$set(t,"name",s.target.value)}}})]),e._v(" "),s("div",{staticClass:"control"},[s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"step.type"}],on:{change:function(s){var i=Array.prototype.filter.call(s.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(t,"type",s.target.multiple?i:i[0])}}},e._l(e.typeSelect,function(t){return s("option",{key:t},[e._v("\n              "+e._s(t)+"\n            ")])}))])]),e._v(" "),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.stepTemp,expression:"step.stepTemp",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"text",placeholder:"Step temperature"},domProps:{value:t.stepTemp},on:{input:function(s){s.target.composing||e.$set(t,"stepTemp",e._n(s.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),s("div",{staticClass:"control"},[s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.$config.tempUnitie,expression:"$config.tempUnitie"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.$config,"tempUnitie",t.target.multiple?s:s[0])}}},e._l(e.unitList.temp,function(t){return s("option",{key:t,domProps:{value:t}},[e._v("\n              °"+e._s(t)+"\n            ")])}))])]),e._v(" "),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.stepTime,expression:"step.stepTime",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"text",placeholder:"Step time"},domProps:{value:t.stepTime},on:{input:function(s){s.target.composing||e.$set(t,"stepTime",e._n(s.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),s("div",{staticClass:"control"},[s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.$config.timeUnitie,expression:"$config.timeUnitie"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.$config,"timeUnitie",t.target.multiple?s:s[0])}}},e._l(e.unitList.time,function(t){return s("option",{key:t},[e._v("\n              "+e._s(t)+"\n            ")])}))])]),e._v(" "),s("div",{staticClass:"control"},[s("button",{staticClass:"button",on:{click:function(t){e.removeStep(i)}}},[s("i",{staticClass:"fa fa-trash-o"}),s("span",{staticClass:"desktop-only"},[e._v("Remove")])])]),e._v(" "),s("div",{staticClass:"columns",attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"column is-4"},[s("v-input",{attrs:{label:"Ramp Time"},model:{value:t.rampTime,callback:function(s){e.$set(t,"rampTime",e._n(s))},expression:"step.rampTime"}})],1),e._v(" "),s("div",{staticClass:"column is-2"},[e._v("\n          "+e._s(e.$config.timeUnitie)+"\n        ")]),e._v(" "),s("div",{staticClass:"column is-2"},[s("label",[e._v("Warter Grain Ratio:")])]),e._v(" "),s("div",{staticClass:"column is-2"},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.waterGrainRatio,expression:"step.waterGrainRatio",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.waterGrainRatio},on:{input:function(s){s.target.composing||e.$set(t,"waterGrainRatio",e._n(s.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),s("div",{staticClass:"column is-2"},[e._v("\n          "+e._s(e.$config.ratioUnitie)+"\n        ")])]),e._v(" "),"Decoction"==t.type?s("div",{staticClass:"columns",attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"column is-2"},[s("label",[e._v("Decoction Amount:")])]),e._v(" "),s("div",{staticClass:"column is-2"},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.decoctionAmt,expression:"step.decoctionAmt",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.decoctionAmt},on:{input:function(s){s.target.composing||e.$set(t,"decoctionAmt",e._n(s.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),s("div",{staticClass:"column is-2"},[e._v("\n          "+e._s(e.$config.volUnitie.toUpperCase())+"\n        ")])]):"Infusion"==t.type?s("div",{staticClass:"columns",attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"column is-2"},[s("label",[e._v("Infuse Amount:")])]),e._v(" "),s("div",{staticClass:"column is-2"},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.infuseAmount,expression:"step.infuseAmount",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.infuseAmount},on:{input:function(s){s.target.composing||e.$set(t,"infuseAmount",e._n(s.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),s("div",{staticClass:"column is-2"},[e._v("\n          "+e._s(e.$config.volUnitie.toUpperCase())+"\n        ")]),e._v(" "),s("div",{staticClass:"column is-2"},[s("label",[e._v("Infuse Temp:")])]),e._v(" "),s("div",{staticClass:"column is-2"},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.infuseTemp,expression:"step.infuseTemp",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.infuseTemp},on:{input:function(s){s.target.composing||e.$set(t,"infuseTemp",e._n(s.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),s("div",{staticClass:"column is-2"},[e._v("\n          °"+e._s(e.$config.tempUnitie)+"\n        ")])]):e._e(),e._v(" "),s("div",{staticClass:"columns",attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"column is-2"},[s("label",[e._v("Description:")])]),e._v(" "),s("div",{staticClass:"column is-10"},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.description,expression:"step.description",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.description},on:{input:function(s){s.target.composing||e.$set(t,"description",e._n(s.target.value))},blur:function(t){e.$forceUpdate()}}})])])])})),e._v(" "),s("div",{staticClass:"column is-full"},[s("area-chart",{attrs:{chartData:e.chartData,width:500,height:150,xLabel:"min",yLabel:"°"+e.$config.tempUnitie}})],1),e._v(" "),s("div",{staticClass:"column is-full"},[s("v-textarea",{attrs:{label:"Mash Notes"},model:{value:e.recepice.mash.notes,callback:function(t){e.$set(e.recepice.mash,"notes",t)},expression:"recepice.mash.notes"}})],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"column is-3"},[t("h5",[this._v("Profils:")])])}]},C=s("VU/8")(h,_,!1,null,null,null);t.default=C.exports},bH4Y:function(e,t){},svui:function(e,t,s){"use strict";var i={name:"item",props:{itemData:Object,id:Number},data:function(){return{contentVisible:!1,timeUnitie:"min",tempUnitie:"°C"}},methods:{toggleContent:function(){this.contentVisible=!this.contentVisible}}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"field has-addons bottom-null"},[s("div",{staticClass:"control"},[s("button",{staticClass:"button",on:{click:e.toggleContent}},[s("span",{staticClass:"icon is-small"},[s("icon",{attrs:{icon:e.contentVisible?["fas","minus"]:["fas","plus"]}})],1)])]),e._v(" "),e._t("default")],2),e._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.contentVisible,expression:"contentVisible"}],staticClass:"card"},[s("div",{staticClass:"card-content"},[e._t("content")],2)])])],1)},staticRenderFns:[]},a=s("VU/8")(i,n,!1,null,null,null);t.a=a.exports}});